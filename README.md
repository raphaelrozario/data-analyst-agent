# ğŸ“Š Data Analyst Agent â€” AI-Powered SQL + Insight Generator

This project is an **LLM-powered Data Analyst Agent** built using **Streamlit**, **DuckDB**, **Pandas**, and **OpenAI (via Agno agentic pipeline)**.  
You can upload one or multiple datasets and query them using **natural language**, and the agent will automatically:

- ğŸ” Generate SQL queries  
- ğŸ— Execute them on DuckDB  
- ğŸ“Š Return analytical results  
- ğŸ–¼ Produce visualizations  
- ğŸ§¹ Clean / preprocess data  
- ğŸ§  Reason across multiple tables  

This showcases real-world **Agentic AI**, tool calling, SQL generation, and data intelligence â€” ideal for LLM engineering roles.

---

## ğŸš€ Features

### âœ”ï¸ Upload Multiple Files
- Supports **CSV and Excel** files
- Each file becomes a separate DuckDB table
- Automatically sanitizes and preprocesses data

### âœ”ï¸ Natural Language â†’ SQL â†’ Answers
Ask questions like:
- *â€œShow me total revenue per product.â€*  
- *â€œJoin sales_data and customers_data to show each customerâ€™s spending.â€*  
- *â€œWhich product has the highest total sales?â€*

### âœ”ï¸ SQL Transparency
Every LLM-generated SQL query appears inside:

```sql
-- example (generated by the agent)
SELECT product, SUM(price * quantity) AS total_revenue
FROM sales_data
GROUP BY product;
``` 

This ensures trust and auditability.

### âœ”ï¸ Visualization Engine
Easy chart generation:
- Bar charts
- Line charts
- Area charts  
Pick:
- Table  
- X-axis column  
- Y-axis column  

Streamlit renders the chart instantly.

### âœ”ï¸ Automatic Preprocessing
- Escapes unsafe CSV characters
- Parses date-formatted columns
- Converts numeric-like strings
- Keeps mixed text columns safe

This guarantees reliable SQL execution.

---

## ğŸ› ï¸ Tech Stack  

- **Python**  
- **Pandas**  
- **Streamlit**  
- **DuckDB**  
- **Agno Agent Framework**  
- **OpenAI / GPT backend**
- **Docker**  

---

## ğŸ“ Project Structure
```
data-analyst-agent/
â”‚
â”œâ”€â”€ app.py # Main Streamlit application
â”œâ”€â”€ README.md # Documentation
â””â”€â”€ sample_data/ # Optional sample datasets
```


---

## ğŸ› ï¸ Installation

### 1ï¸âƒ£ Clone the repository
```bash
git clone https://github.com/raphaelrozario/data-analyst-agent.git
cd data-analyst-agent
```

### 2ï¸âƒ£ Create and activate a virtual environment (Windows PowerShell)
```bash
python -m venv .venv
.\.venv\Scripts\activate
```


### 3ï¸âƒ£ Install dependencies
```bash
pip install streamlit pandas duckdb agno openai
```

### â–¶ï¸ Run the App
```bash
streamlit run app.py
```

ğŸ³ Docker Support
Build the Docker Image
```bash
docker build -t data-analyst-agent .
```

Run the App in Docker
```bash
docker run -p 8501:8501 data-analyst-agent
```

App will be available at:

http://localhost:8501

ğŸ“¸ Application Demo (Screenshots)

Here are a few screenshots showing the interface, visualizations, and AI-powered SQL generation in action.

## ğŸ”‘ API Key Screen and Uploading a Dataset
Shows secure OpenAI API key input and confirmation inside the sidebar.
Uploaded CSV converted into a DuckDB table with automatic type parsing and a clean preview UI.

![API Key Screen](images/Data%20Analyst%20Image%201.png)


## â“ Asking Questions About Data
Users can ask natural-language questions about the dataset.
The agent generates SQL, executes it, and returns results.

![Questions UI](images/Data%20Analyst%20Image%202.png)

## ğŸ§  SQL + Agent Response

The model returns:

A natural language answer

The SQL query it used

A readable breakdown of results

![SQL Agent Response](images/Data%20Analyst%20Image%203.png)

## ğŸ“Š Visualization
![Dataset Upload](images/Data%20Analyst%20Image%204.png)
